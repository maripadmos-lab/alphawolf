;/*FB_PKG_DELIM*/

__d("LSOnMessageStatusChange.nop",["Promise"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,r,o,a,i,l,s){return(e||(e=n("Promise"))).resolve()}s.__nop_name__="LSOnMessageStatusChange",l.default=s}),98);
__d("LSReplaceOptimsiticMessage",["LSOnMessageStatusChange.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(r){return t.sequence([function(r){return t.nativeOperation(n("LSOnMessageStatusChange.nop"),void 0,e[0],e[1],t.i64.cast([0,60]),void 0)},function(n){return t.forEach(t.filter(t.db.table(12).fetch([[[e[0]]],"optimistic"]),function(n){return n.offlineThreadingId===e[0]&&t.i64.eq(n.authorityLevel,t.i64.cast([0,20]))}),function(n){var r=n.update,o=n.item;return r({messageId:e[1],authorityLevel:t.i64.cast([0,60]),sendStatus:t.i64.cast([0,2]),sendStatusV2:t.i64.cast([0,2])})})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxReplaceOptimsiticMessageStoredProcedure",e.__tables__=["messages"],a.exports=e}),null);
__d("LSUpdateMessagesOptimisticContext",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(31).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.taskId,e[0])&&n.textHasLinks!==void 0}),function(e){var t=e.update,n=e.item;return t({textHasLinks:void 0})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateMessagesOptimisticContextStoredProcedure",e.__tables__=["messages_optimistic_context"],a.exports=e}),null);