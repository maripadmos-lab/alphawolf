;/*FB_PKG_DELIM*/

__d("LSLocalCreateOptimisticGroupThreadStoredProcedure",["LSLocalCreateOptimisticGroupThread","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSLocalCreateOptimisticGroupThread"),a.participants,a.nullstateDescriptionText,a.threadName,a.checkExistingThreads,a.threadMetadata);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSTriggerOnDemandCutoverIfNeeded",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return r[0]=new t.Map,r[0].set("open_thread_id",e[0]),r[1]=r[0].get("open_thread_id"),r[2]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[1]),t.i64.cast([0,741]),r[2],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxTriggerOnDemandCutoverIfNeededStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSTriggerOnDemandCutoverIfNeededStoredProcedure",["LSSynchronousPromise","LSTriggerOnDemandCutoverIfNeeded","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSTriggerOnDemandCutoverIfNeeded"),a.waJid);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWCreateOptimisticSecureThread",["FBLogger","I64","LSAuthorityLevel","LSFactory","LSGroupParticipantJoinState","LSIntEnum","MAWVerifyThreadExistsUtils","Promise","ReQLTable"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t){return o("MAWVerifyThreadExistsUtils").runVerifyThreadExistsSproc(r("LSFactory")(e),{authorityLevel:(u||(u=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").OPTIMISTIC),threadType:t},"createSecureOccamadilloOptimisticThread").then(function(t){var n=t[0];return o("ReQLTable").update(e.threads,[n],function(e){if(e==null)throw r("FBLogger")("maw_threads").mustfixThrow("Optimistic thread is missing");return babelHelpers.extends({},e,{clientThreadKey:n})}).then(function(){return n})})}function d(t,a,i){return c(t,i).then(function(i){return(e||(e=n("Promise"))).all(a.map(function(e){return t.participants.add({authorityLevel:(u||(u=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").OPTIMISTIC),contactId:e.id,deliveredWatermarkTimestampMs:(s||(s=o("I64"))).zero,groupParticipantJoinState:u.ofNumber(r("LSGroupParticipantJoinState").MEMBER),isAdmin:void 0,isModerator:!1,isSuperAdmin:void 0,nickname:void 0,normalizedSearchTerms:void 0,participantCapabilities:void 0,readActionTimestampMs:s.zero,readWatermarkTimestampMs:s.zero,subscribeSource:void 0,threadKey:i})})).then(function(){return i})})}l.call=d}),98);
__d("MAWOnDemandCutoverQPLLogger",["I64","MAWLoggerUtils","MWFBLogger","QPLUserFlow","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p=o("MWFBLogger").MWLogger().tags(["ODCutover"]),_=new Set;function f(t,n){var a=o("MAWLoggerUtils").getInstanceKeyFromId((m||(m=o("I64"))).to_string(t));_.has(a)?g(t,"already_in_progress"):(p.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Triggering cutover (non-blocking) from "," for ThreadKey: ",""])),n,(m||(m=o("I64"))).to_string(t)),_.add(a),r("QPLUserFlow").start(r("qpl")._(1056847893,"505"),{annotations:{bool:{is_non_blocking:!0},string:{entrypoint:n}},instanceKey:a}))}function g(e,t,n){var a=o("MAWLoggerUtils").getInstanceKeyFromId((m||(m=o("I64"))).to_string(e));t==="secure_thread_created"&&p.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Secure thread created for od-cutover (non-blocking) for ThreadKey: ",""])),(m||(m=o("I64"))).to_string(e)),r("QPLUserFlow").addPoint(r("qpl")._(1056847893,"505"),t,babelHelpers.extends({instanceKey:a},n))}function h(e,t){var n=o("MAWLoggerUtils").getInstanceKeyFromId((m||(m=o("I64"))).to_string(e));r("QPLUserFlow").addAnnotations(r("qpl")._(1056847893,"505"),t,{instanceKey:n})}function y(e,t){var n=o("MAWLoggerUtils").getInstanceKeyFromId((m||(m=o("I64"))).to_string(e));_.has(n)&&(p.DEBUG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Cutover (non-blocking) finished successfully for ThreadKey: ",". ",""])),(m||(m=o("I64"))).to_string(e),t!=null?t:""),r("QPLUserFlow").endSuccess(r("qpl")._(1056847893,"505"),babelHelpers.extends({},t!=null&&{annotations:{string:{message:t}}},{instanceKey:n})),_.delete(n))}function C(e,t){var n=o("MAWLoggerUtils").getInstanceKeyFromId((m||(m=o("I64"))).to_string(e));_.has(n)&&(p.DEBUG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Cutover (non-blocking) finished with error for ThreadKey: ",". ",""])),(m||(m=o("I64"))).to_string(e),t!=null?t:""),r("QPLUserFlow").endFailure(r("qpl")._(1056847893,"505"),t,{instanceKey:n}),_.delete(n))}function b(e,t){var n=o("MAWLoggerUtils").getInstanceKeyFromId((m||(m=o("I64"))).to_string(e));_.has(n)&&(p.DEBUG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Cutover (non-blocking) cancelled for ThreadKey: ",". ",""])),(m||(m=o("I64"))).to_string(e),t!=null?t:""),r("QPLUserFlow").endCancel(r("qpl")._(1056847893,"505"),babelHelpers.extends({},t!=null&&{annotations:{string:{reason:t}}},{instanceKey:n})),_.delete(n))}l.startQpl=f,l.addPoint=g,l.addAnnotations=h,l.endSuccessIfInProgress=y,l.endFailureIfInProgress=C,l.endCancelIfInProgress=b}),98);
__d("MAWOnDemandCutoverTrigger",["LSCutoverMappingQueryFromOpenThreadIdStoredProcedure","LSFactory","LSTriggerOnDemandCutoverIfNeededStoredProcedure","MAWCreateAndWaitForAuthoritativeOneToOneThread","MAWOnDemandCutoverQPLLogger","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){o("MAWOnDemandCutoverQPLLogger").startQpl(t,n),r("promiseDone")(e.runInTransaction(function(e){return r("LSCutoverMappingQueryFromOpenThreadIdStoredProcedure")(r("LSFactory")(e),{openThreadId:t})},"readwrite",void 0,void 0,i.id+":35")),r("promiseDone")(e.runInTransaction(function(e){return r("LSTriggerOnDemandCutoverIfNeededStoredProcedure")(r("LSFactory")(e),{waJid:t})},"readwrite",void 0,void 0,i.id+":45"))}function s(t,n,a){e(t,n,a),r("MAWCreateAndWaitForAuthoritativeOneToOneThread")(t,n,"MAWOnDemandCutoverTrigger",function(){o("MAWOnDemandCutoverQPLLogger").addPoint(n,"secure_thread_created")})}l.triggerOnDemandCutover=e,l.triggerOnDemandCutoverAndCreateSecureThread=s}),98);
__d("MWCMLogMuteDuration.react",["C4gEngagementFalcoEvent","I64","MWCMGetValidId","MessengerSurfaceType"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){var t,n,r,o,a;return{"1_hour":(t=e.oneHour)!=null?t:"0","15_min":(n=e.fifteenMin)!=null?n:"0","24_hour":(r=e.twentyFourHour)!=null?r:"0","8_hour":(o=e.eightHour)!=null?o:"0",until_i_turn_it_back_on:(a=e.always)!=null?a:"0"}}function u(e){switch(e){case 9e5:return s({fifteenMin:"1"});case 36e5:return s({oneHour:"1"});case 288e5:return s({eightHour:"1"});case 864e5:return s({twentyFourHour:"1"});case-1:return s({always:"1"});default:return s({})}}function c(t){var n=t.groupId,a=t.threadKey,i=t.communityId,l=t.eventType,s=t.surface,c=s===void 0?String(o("MessengerSurfaceType").messenger):s,d=t.source,m=t.duration,p=t.clientExtras,_=p===void 0?{}:p,f=m===0||m==null?_:babelHelpers.extends({},_,u(m));return r("C4gEngagementFalcoEvent").log(function(){return{action:"tap",client_extras:f,community_id:i==null?null:(e||(e=o("I64"))).to_string(i),event:l,group_id:o("MWCMGetValidId").MWCMHasValidFbGroupId(n)?(e||(e=o("I64"))).to_string(n):null,source:d,surface:c,thread_id:a==null?null:(e||(e=o("I64"))).to_string(a)}})}l.log=c}),98);
__d("MWInChatTabContextProvider.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.createContext,d=u.useContext,m=c(!1);function p(){return d(m)}function _(e){var t=o("react-compiler-runtime").c(2),n=e.children,r;return t[0]!==n?(r=s.jsx(m.Provider,{value:!0,children:n}),t[0]=n,t[1]=r):r=t[1],r}l.useInChatTab=p,l.InChatTabContextProvider=_}),98);
__d("MWPThreadPreview.react",["CometHeroInteractionWithDiv.react","FBLogger","I64","Int64Hooks","InteractionTracingMetrics","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSFactory","LSIntEnum","LSLocalCreateOptimisticGroupThreadStoredProcedure","LSMessagingThreadTypeUtil","LSVec","LSVerifyContactRowExistsStoredProcedure","LSVerifyThreadRowExistsStoredProcedure","MWChatInteraction","MWPActor.react","MWPThreadThemeProvider.react","MWThreadKey.react","MWXSpinner.react","Promise","ReQL","ReQLSuspense","cr:13308","cr:9777","gkx","promiseDone","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=d||(d=o("react")),p=d,_=p.useEffect,f=p.useMemo,g={preview:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",minHeight:"x2lwn1j",$$css:!0}};function h(t){var a=o("react-compiler-runtime").c(8),l=(c||(c=r("useReStore")))(),u;a[0]!==l||a[1]!==t?(u=function(){r("promiseDone")(l.runInTransaction(function(a){return(e||(e=n("Promise"))).all(t.map(function(e){return r("LSVerifyContactRowExistsStoredProcedure")(r("LSFactory")(a),{authorityLevel:(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").CLIENT_PARTIAL),blockedByViewerStatus:s.ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED),contactIdType:s.ofNumber(r("LSContactIdType").FBID),contactType:s.ofNumber(r("LSContactType").USER),contactViewerRelationship:s.ofNumber(r("LSContactViewerRelationship").UNKNOWN),gender:s.ofNumber(r("LSContactGender").UNKNOWN),id:e.id,isBlocked:!1,isMemorialized:!1,isSelf:!1,workForeignEntityType:s.ofNumber(r("LSContactWorkForeignEntityType").UNKNOWN)})}))},"readwrite",void 0,void 0,i.id+":89"))},a[0]=l,a[1]=t,a[2]=u):u=a[2];var d;a[3]!==t?(d=JSON.stringify(t.map(y)),a[3]=t,a[4]=d):d=a[4];var m;a[5]!==l||a[6]!==d?(m=[l,d],a[5]=l,a[6]=d,a[7]=m):m=a[7],_(u,m)}function y(e){return(u||(u=o("I64"))).to_string(e.id)}function C(e){var t=o("react-compiler-runtime").c(25),n=e.children,a=e.renderThreadPreview,i=e.renderThreadView,l=e.thread,s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=o("MWChatInteraction").get("open_with_tokens"),t[0]=s):s=t[0];var c=s,d,p;if(t[1]!==l.threadKey||t[2]!==l.threadType?(d=function(){c!=null&&(r("InteractionTracingMetrics").addAnnotation(c,"thread_id",(u||(u=o("I64"))).to_string(l.threadKey)),r("InteractionTracingMetrics").addAnnotation(c,"thread_type",u.to_string(l.threadType)),r("InteractionTracingMetrics").addAnnotationBoolean(c,"is_secure",o("LSMessagingThreadTypeUtil").isArmadilloSecure(l.threadType)))},p=[c,l.threadKey,l.threadType],t[1]=l.threadKey,t[2]=l.threadType,t[3]=d,t[4]=p):(d=t[3],p=t[4]),_(d,p),a!=null){var f;return t[5]!==n||t[6]!==a||t[7]!==l?(f=a(l,n),t[5]=n,t[6]=a,t[7]=l,t[8]=f):f=t[8],f}var h=l.threadKey,y;t[9]===Symbol.for("react.memo_cache_sentinel")?(y={className:"x78zum5 xdt5ytf x1iyjqo2 x6prxxf x2lwn1j"},t[9]=y):y=t[9];var C=l.themeFbid,b;t[10]!==i||t[11]!==l?(b=i(l),t[10]=i,t[11]=l,t[12]=b):b=t[12];var v;t[13]!==b||t[14]!==l.themeFbid?(v=m.jsx(r("CometHeroInteractionWithDiv.react"),{interactionDesc:"MWV2_CHAT_TAB",interactionUUID:c,pageletName:"ChatTab",xstyle:g.preview,children:m.jsx(r("MWPThreadThemeProvider.react"),{themeFbid:C,children:b})}),t[13]=b,t[14]=l.themeFbid,t[15]=v):v=t[15];var S;t[16]===Symbol.for("react.memo_cache_sentinel")?(S={className:"x2lah0s x879a55"},t[16]=S):S=t[16];var R;t[17]!==n?(R=m.jsx("div",babelHelpers.extends({},S,{children:n})),t[17]=n,t[18]=R):R=t[18];var L;t[19]!==R||t[20]!==v?(L=m.jsxs("div",babelHelpers.extends({},y,{children:[v,R]})),t[19]=R,t[20]=v,t[21]=L):L=t[21];var E;return t[22]!==L||t[23]!==l.threadKey?(E=m.jsx(o("MWThreadKey.react").MWThreadKeyProvider,{id:h,children:L}),t[22]=L,t[23]=l.threadKey,t[24]=E):E=t[24],E}function b(e){var t=o("react-compiler-runtime").c(22),n=e.children,a=e.recipientToken,l=e.renderThreadPreview,u=e.renderThreadView,d=e.setPreviewThread,p=(c||(c=r("useReStore")))(),f=a.threadType,g=a.id,y;t[0]!==a?(y=[a],t[0]=a,t[1]=y):y=t[1],h(y);var b,v;t[2]!==g||t[3]!==p||t[4]!==f?(b=function(){r("promiseDone")(p.runInTransaction(function(e){return r("LSVerifyThreadRowExistsStoredProcedure")(r("LSFactory")(e),{syncGroup:(s||(s=o("LSIntEnum"))).ofNumber(1),threadKey:g,threadType:f})},"readwrite",void 0,void 0,i.id+":186"))},v=[p,g,f],t[2]=g,t[3]=p,t[4]=f,t[5]=b,t[6]=v):(b=t[5],v=t[6]),o("Int64Hooks").useEffectInt64(b,v);var S;t[7]!==g||t[8]!==p.tables.threads?(S=function(){return o("ReQL").fromTableAscending(p.tables.threads).getKeyRange(g)},t[7]=g,t[8]=p.tables.threads,t[9]=S):S=t[9];var R;t[10]!==g||t[11]!==p?(R=[p,g],t[10]=g,t[11]=p,t[12]=R):R=t[12];var L=o("ReQLSuspense").useFirst(S,R,i.id+":197"),E,k;if(t[13]!==d||t[14]!==L?(E=function(){d(L)},k=[d,L],t[13]=d,t[14]=L,t[15]=E,t[16]=k):(E=t[15],k=t[16]),_(E,k),L!=null){var I;return t[17]!==n||t[18]!==l||t[19]!==u||t[20]!==L?(I=m.jsx(C,{renderThreadPreview:l,renderThreadView:u,thread:L,children:n}),t[17]=n,t[18]=l,t[19]=u,t[20]=L,t[21]=I):I=t[21],I}else return null}function v(e,t,n){var a=o("react-compiler-runtime").c(21),l=(c||(c=r("useReStore")))(),s=(u||(u=o("I64"))).to_string(o("MWPActor.react").useActor()),d;a[0]!==l.tables.participants||a[1]!==t?(d=function(){return o("ReQL").fromTableAscending(l.tables.participants).filter(function(e){return t.has((u||(u=o("I64"))).to_string(e.contactId))}).map(k)},a[0]=l.tables.participants,a[1]=t,a[2]=d):d=a[2];var m;a[3]!==l||a[4]!==t?(m=[l,t],a[3]=l,a[4]=t,a[5]=m):m=a[5];var p=o("ReQLSuspense").useArray(d,m,i.id+":233"),_;a[6]!==s||a[7]!==l.tables.participants||a[8]!==l.tables.threads||a[9]!==n||a[10]!==p||a[11]!==t||a[12]!==e.length?(_=function(){var r=new Set(p);return o("ReQL").fromTableAscending(l.tables.threads).filter(function(e){return(u||(u=o("I64"))).equal(e.threadType,n)}).filter(E).filter(function(e){var t=e.clientThreadKey;return t!=null?r.has((u||(u=o("I64"))).to_string(t)):!1}).filter(L).map(function(e){var t=e.clientThreadKey,n=o("ReQLSuspense").toArray(o("ReQL").fromTableDescending(l.tables.participants.index("threadKeyReadWatermarkTimestampMs")).getKeyRange(t).map(R).filter(function(e){return e!==s}),i.id+":273");return{participantsWithoutActor:n,thread:e}}).filter(function(n){var r=n.participantsWithoutActor;return e.length===1&&r.length===0?!0:r.every(function(e){return t.has(e)})?r.length===t.size:!1}).map(S)},a[6]=s,a[7]=l.tables.participants,a[8]=l.tables.threads,a[9]=n,a[10]=p,a[11]=t,a[12]=e.length,a[13]=_):_=a[13];var f;return a[14]!==s||a[15]!==l||a[16]!==n||a[17]!==p||a[18]!==t||a[19]!==e.length?(f=[p,l,n,e.length,s,t],a[14]=s,a[15]=l,a[16]=n,a[17]=p,a[18]=t,a[19]=e.length,a[20]=f):f=a[20],o("ReQLSuspense").useFirst(_,f,i.id+":246")}function S(e){return e.thread}function R(e){return(u||(u=o("I64"))).to_string(e.contactId)}function L(e){var t=e.clientThreadKey;return t!=null}function E(e){return e.threadName==null}function k(e){return(u||(u=o("I64"))).to_string(e.threadKey)}function I(e,t,a,l,d,m){var p=o("react-compiler-runtime").c(9),_=d===void 0?null:d,f=m===void 0?null:m,g=(c||(c=r("useReStore")))(),h=e==null,y,C;p[0]!==l||p[1]!==g||p[2]!==h||p[3]!==_||p[4]!==f||p[5]!==t||p[6]!==a?(y=function(){if(h){if((u||(u=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(2))){r("promiseDone")(g.runInTransaction(function(e){return r("LSLocalCreateOptimisticGroupThreadStoredProcedure")(r("LSFactory")(e),{checkExistingThreads:l,participants:r("LSVec").ofArray(a.map(D)),threadMetadata:_!=null?_:void 0,threadName:f!=null?f:void 0}).then(T)},"readwrite",void 0,void 0,i.id+":332"));return}else if((u||(u=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(15))&&a.length===1&&n("cr:13308")!=null&&r("gkx")("17734")){r("promiseDone")(n("cr:13308").call(g,a[0].id,void 0,"MAWThreadPreview"));return}else if(o("LSMessagingThreadTypeUtil").isArmadilloSecure(t)){if(n("cr:9777")==null)return;r("promiseDone")(g.runInTransaction(function(e){return n("cr:9777").call(e,a,t)},"readwrite",void 0,void 0,i.id+":373"));return}r("FBLogger")("messenger_web_creation").mustfix("Don't know how to create optimistic thread for thread of thread type %s",t!=null?(u||(u=o("I64"))).to_string(t):"")}},C=[l,g,h,a,_,t,f],p[0]=l,p[1]=g,p[2]=h,p[3]=_,p[4]=f,p[5]=t,p[6]=a,p[7]=y,p[8]=C):(y=p[7],C=p[8]),o("Int64Hooks").useEffectInt64(y,C)}function T(){}function D(e){return e.id}function x(e){var t=o("react-compiler-runtime").c(8),n=e.checkExistingThreads,r=e.children,a=e.renderThreadPreview,i=e.renderThreadView,l=e.setPreviewThread,s=e.threadMetadata,u=e.threadName,c=e.threadType,d=e.tokenContactIdsMaybeExcludingActor,p=e.tokens,f=e.tokensMaybeExcludingActor,g=s===void 0?null:s,y=u===void 0?null:u,b=v(f,d,c);h(f),I(b,c,p,n,g,y);var S;if(t[0]!==l||t[1]!==b?(S=function(){l(b)},t[0]=l,t[1]=b,t[2]=S):S=t[2],_(S,void 0),b!=null){var R;return t[3]!==r||t[4]!==a||t[5]!==i||t[6]!==b?(R=m.jsx(C,{renderThreadPreview:a,renderThreadView:i,thread:b,children:r}),t[3]=r,t[4]=a,t[5]=i,t[6]=b,t[7]=R):R=t[7],R}else return null}function $(e,t,n,a,l,d){var m=o("react-compiler-runtime").c(28),p=(c||(c=r("useReStore")))(),_=(u||(u=o("I64"))).to_string(o("MWPActor.react").useActor()),f;m[0]!==p.tables.participants||m[1]!==t?(f=function(){return o("ReQL").fromTableAscending(p.tables.participants).filter(function(e){return t.has((u||(u=o("I64"))).to_string(e.contactId))}).map(w)},m[0]=p.tables.participants,m[1]=t,m[2]=f):f=m[2];var g;m[3]!==p||m[4]!==t?(g=[p,t],m[3]=p,m[4]=t,m[5]=g):g=m[5];var h=o("ReQLSuspense").useArray(f,g,i.id+":460"),y=r("gkx")("24167")||r("gkx")("33038"),C;m[6]!==_||m[7]!==a||m[8]!==p.tables.participants||m[9]!==p.tables.threads||m[10]!==d||m[11]!==l||m[12]!==n||m[13]!==h||m[14]!==t||m[15]!==e.length?(C=function(){var c=new Set(h),m=function(){var t=e.length>1;if(t){if(d)return o("ReQL").fromTableAscending(p.tables.threads).filter(M);if(r("gkx")("5703"))return o("ReQL").fromTableDescending(p.tables.threads.index("lastActivityTimestampMs"))}return o("ReQL").fromTableAscending(p.tables.threads).filter(function(e){return(u||(u=o("I64"))).equal(e.threadType,n)})},f=m();return f.filter(function(e){return y&&l!=null?e.threadName===l:e.threadName==null}).filter(function(e){return a?!0:(u||(u=o("I64"))).equal(e.authorityLevel,(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").OPTIMISTIC))}).filter(function(e){return c.has((u||(u=o("I64"))).to_string(e.threadKey))}).map(function(e){var t=o("ReQLSuspense").toArray(o("ReQL").fromTableDescending(p.tables.participants.index("threadKeyReadWatermarkTimestampMs")).getKeyRange(e.threadKey).map(N),i.id+":532");return{participantsWithActor:t,thread:e}}).filter(function(e){var n=e.participantsWithActor,r=n.filter(function(e){return e!==_});return r.length===0&&n.length===1?!0:n.length===r.length||r.length!==t.size?!1:r.every(function(e){return t.has(e)})}).map(P)},m[6]=_,m[7]=a,m[8]=p.tables.participants,m[9]=p.tables.threads,m[10]=d,m[11]=l,m[12]=n,m[13]=h,m[14]=t,m[15]=e.length,m[16]=C):C=m[16];var b;m[17]!==n?(b=JSON.stringify(n),m[17]=n,m[18]=b):b=m[18];var v;return m[19]!==_||m[20]!==a||m[21]!==p||m[22]!==b||m[23]!==l||m[24]!==h||m[25]!==t||m[26]!==e?(v=[h,p,b,a,e,t,_,l,y],m[19]=_,m[20]=a,m[21]=p,m[22]=b,m[23]=l,m[24]=h,m[25]=t,m[26]=e,m[27]=v):v=m[27],o("ReQLSuspense").useFirst(C,v,i.id+":476")}function P(e){return e.thread}function N(e){return(u||(u=o("I64"))).to_string(e.contactId)}function M(e){return(u||(u=o("I64"))).equal(e.threadType,(s||(s=o("LSIntEnum"))).ofNumber(16))}function w(e){return(u||(u=o("I64"))).to_string(e.threadKey)}function A(e){var t=o("react-compiler-runtime").c(23),n=e.checkExistingThreads,r=e.children,a=e.renderThreadPreview,i=e.renderThreadView,l=e.secureThreadToggleEnabled,s=e.setPreviewThread,u=e.threadMetadata,c=e.threadName,d=e.threadType,p=e.tokens,f=e.tokensMaybeExcludingActor,g=u===void 0?null:u,h=c===void 0?null:c,y;t[0]!==f?(y=new Set(f.map(F)),t[0]=f,t[1]=y):y=t[1];var b=y,v=$(f,b,d,n,h,l),S,R;if(t[2]!==s||t[3]!==v?(S=function(){v!=null&&s(v)},R=[s,v],t[2]=s,t[3]=v,t[4]=S,t[5]=R):(S=t[4],R=t[5]),_(S,R),v!=null){var L;return t[6]!==r||t[7]!==a||t[8]!==i||t[9]!==v?(L=m.jsx(C,{renderThreadPreview:a,renderThreadView:i,thread:v,children:r}),t[6]=r,t[7]=a,t[8]=i,t[9]=v,t[10]=L):L=t[10],L}else{var E;return t[11]!==n||t[12]!==r||t[13]!==a||t[14]!==i||t[15]!==s||t[16]!==g||t[17]!==h||t[18]!==d||t[19]!==b||t[20]!==p||t[21]!==f?(E=m.jsx(x,{checkExistingThreads:n,renderThreadPreview:a,renderThreadView:i,setPreviewThread:s,threadMetadata:g,threadName:h,threadType:d,tokenContactIdsMaybeExcludingActor:b,tokens:p,tokensMaybeExcludingActor:f,children:r}),t[11]=n,t[12]=r,t[13]=a,t[14]=i,t[15]=s,t[16]=g,t[17]=h,t[18]=d,t[19]=b,t[20]=p,t[21]=f,t[22]=E):E=t[22],E}}function F(e){return(u||(u=o("I64"))).to_string(e.id)}function O(e){var t=o("react-compiler-runtime").c(59),n=e.areWeCreatingASecureThread,a=e.checkExistingThreads,i=e.children,l=e.isCutoverInProgress,c=e.nullstate,d=e.renderThreadPreview,p=e.renderThreadView,f=e.secureThreadToggleEnabled,g=e.setPreviewThread,h=e.threadMetadata,y=e.threadName,C=e.tokens,v=a===void 0?!0:a,S=l===void 0?!1:l,R=c===void 0?null:c,L=f===void 0?!1:f,E=h===void 0?null:h,k=y===void 0?null:y,I=o("MWPActor.react").useActor(),T;if(t[0]!==I||t[1]!==C){var D;t[3]!==I?(D=function(t){return!(u||(u=o("I64"))).equal(t.id,I)},t[3]=I,t[4]=D):D=t[4],T=C.filter(D),t[0]=I,t[1]=C,t[2]=T}else T=t[2];var x=T,$;t[5]!==g||t[6]!==C.length?($=function(){C.length===0&&g()},t[5]=g,t[6]=C.length,t[7]=$):$=t[7];var P;if(t[8]!==g||t[9]!==C?(P=[g,C],t[8]=g,t[9]=C,t[10]=P):P=t[10],_($,P),S){var N;return t[11]===Symbol.for("react.memo_cache_sentinel")?(N=m.jsx("div",{className:"x6s0dn4 x78zum5 x1iyjqo2 xl56j7k",children:m.jsx(r("MWXSpinner.react"),{color:"disabled_DEPRECATED",size:24})}),t[11]=N):N=t[11],N}if(C.length===0)return R;var M=x.length;if(M!==1){if(M===0){if(n){var w;t[12]===Symbol.for("react.memo_cache_sentinel")?(w=(s||(s=o("LSIntEnum"))).ofNumber(15),t[12]=w):w=t[12];var F;return t[13]!==v||t[14]!==i||t[15]!==d||t[16]!==p||t[17]!==L||t[18]!==g||t[19]!==E||t[20]!==C?(F=m.jsx(A,{checkExistingThreads:v,renderThreadPreview:d,renderThreadView:p,secureThreadToggleEnabled:L,setPreviewThread:g,threadMetadata:E,threadType:w,tokens:C,tokensMaybeExcludingActor:C,children:i}),t[13]=v,t[14]=i,t[15]=d,t[16]=p,t[17]=L,t[18]=g,t[19]=E,t[20]=C,t[21]=F):F=t[21],F}var O;return t[22]!==i||t[23]!==d||t[24]!==p||t[25]!==g||t[26]!==C[0]?(O=m.jsx(b,{recipientToken:C[0],renderThreadPreview:d,renderThreadView:p,setPreviewThread:g,children:i}),t[22]=i,t[23]=d,t[24]=p,t[25]=g,t[26]=C[0],t[27]=O):O=t[27],O}}else{var B=x[0];if(v)if(n){var W;t[28]===Symbol.for("react.memo_cache_sentinel")?(W=(s||(s=o("LSIntEnum"))).ofNumber(15),t[28]=W):W=t[28];var q;return t[29]!==v||t[30]!==i||t[31]!==d||t[32]!==p||t[33]!==L||t[34]!==g||t[35]!==E||t[36]!==C||t[37]!==x?(q=m.jsx(A,{checkExistingThreads:v,renderThreadPreview:d,renderThreadView:p,secureThreadToggleEnabled:L,setPreviewThread:g,threadMetadata:E,threadType:W,tokens:C,tokensMaybeExcludingActor:x,children:i}),t[29]=v,t[30]=i,t[31]=d,t[32]=p,t[33]=L,t[34]=g,t[35]=E,t[36]=C,t[37]=x,t[38]=q):q=t[38],q}else{var U;return t[39]!==i||t[40]!==B||t[41]!==d||t[42]!==p||t[43]!==g?(U=m.jsx(b,{recipientToken:B,renderThreadPreview:d,renderThreadView:p,setPreviewThread:g,children:i}),t[39]=i,t[40]=B,t[41]=d,t[42]=p,t[43]=g,t[44]=U):U=t[44],U}}var V;t[45]!==n?(V=n?(s||(s=o("LSIntEnum"))).ofNumber(16):(s||(s=o("LSIntEnum"))).ofNumber(2),t[45]=n,t[46]=V):V=t[46];var H;return t[47]!==v||t[48]!==i||t[49]!==d||t[50]!==p||t[51]!==L||t[52]!==g||t[53]!==V||t[54]!==E||t[55]!==k||t[56]!==C||t[57]!==x?(H=m.jsx(A,{checkExistingThreads:v,renderThreadPreview:d,renderThreadView:p,secureThreadToggleEnabled:L,setPreviewThread:g,threadMetadata:E,threadName:k,threadType:V,tokens:C,tokensMaybeExcludingActor:x,children:i}),t[47]=v,t[48]=i,t[49]=d,t[50]=p,t[51]=L,t[52]=g,t[53]=V,t[54]=E,t[55]=k,t[56]=C,t[57]=x,t[58]=H):H=t[58],H}l.default=O}),98);
__d("MWV2ChatTabThreadLinkHashContext.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.createContext,d=u.useContext,m=c(null);function p(e){var t=o("react-compiler-runtime").c(3),n=e.children,r=e.threadLinkHash,a=r!=null?r:null,i;return t[0]!==n||t[1]!==a?(i=s.jsx(m.Provider,{value:a,children:n}),t[0]=n,t[1]=a,t[2]=i):i=t[2],i}function _(){return d(m)}l.MWV2ChatTabThreadLinkHashContextProvider=p,l.useGetChatTabThreadLinkHash=_}),98);
__d("useCometConfirmationDialog",["FDSDialogLoadingState.react","react","react-compiler-runtime","requireDeferred","useCometDeferredDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useCallback,c=r("requireDeferred")("FDSConfirmationDialogImpl.react").__setRef("useCometConfirmationDialog");function d(){var e=o("react-compiler-runtime").c(2),t=r("useCometDeferredDialog")(c,p),n;return e[0]!==t?(n=function(n,r,o){var e=o===void 0?m:o;t(n,function(t){t?r():e()})},e[0]=t,e[1]=n):n=e[1],n}function m(){}function p(){return s.jsx(r("FDSDialogLoadingState.react"),{})}p.displayName=p.name+" [from "+i.id+"]",l.default=d}),98);