;/*FB_PKG_DELIM*/

__d("useMAWBulkMaybeAutoTriggerDownload",["MAWDownloadMediaInWorkerDeferred","MAWMediaDownloadStatus","react","react-compiler-runtime","useAsyncReStore","useMAWMediaDownloadStatusBulk"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useMemo,d=s.useRef;function m(e,t,n,a){var i=o("react-compiler-runtime").c(12),l=r("useMAWMediaDownloadStatusBulk")(e,a),s=l.mawMediaStatuses,c;i[0]===Symbol.for("react.memo_cache_sentinel")?(c=[r("MAWMediaDownloadStatus").MISSING_FILE,r("MAWMediaDownloadStatus").MANUAL_RETRYABLE_FAILURE,r("MAWMediaDownloadStatus").DOWNLOADING].filter(Boolean),i[0]=c):c=i[0];var m=c,p;i[1]!==e||i[2]!==s?(p=new Map(s==null?void 0:s.map(function(t,n){var r=m.includes(t==null?void 0:t.mainMediaStatus);return[e[n].attachment.attachmentFbid,r]})),i[1]=e,i[2]=s,i[3]=p):p=i[3];var _=p,f;i[4]===Symbol.for("react.memo_cache_sentinel")?(f=new Map,i[4]=f):f=i[4];var g=d(f),h=r("useAsyncReStore")(),y,C;i[5]!==e||i[6]!==h||i[7]!==n||i[8]!==_||i[9]!==t?(y=function(){var r=[];e.forEach(function(e){var t,n,o=e.attachment,a=e.mediaRenderQpl,i=(t=_.get(o.attachmentFbid))!=null?t:!1,l=(n=g.current.get(o.attachmentFbid))!=null?n:!1;i&&!l&&(g.current.set(o.attachmentFbid,!0),r.push({attachment:o,mediaRenderQpl:a}))}),r.length>0&&o("MAWDownloadMediaInWorkerDeferred").maybeBulkDownloadMediaInWorker({attachmentsWithQpl:r,dbPromise:h,downloadType:n,triggerUIView:t})},C=[e,h,n,g,_,t],i[5]=e,i[6]=h,i[7]=n,i[8]=_,i[9]=t,i[10]=y,i[11]=C):(y=i[10],C=i[11]),u(y,C)}l.default=m}),98);
__d("MWChatAttachmentMediaState.react",["$InternalEnum","I64","LSIntEnum","MAWClientMediaStatusUtils","MAWVideoAudioPlaybackErrorHandlerUtils","MessagingAttachmentType","RavenMessagingState","filterNulls","react","react-compiler-runtime","useClientMediaStatus","useMAWBulkMaybeAutoTriggerDownload","usePrevious"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=e||(e=o("react")),d=e,m=d.createContext,p=d.useEffect,_=d.useMemo,f=d.useState,g=n("$InternalEnum")({Image:0,Video:1,AnimatedImage:2}),h=m({canMoveBackward:!1,canMoveForward:!1,card:void 0,cards:[],currentIndex:0,isImageExpanded:!1,moveBackward:function(){},moveForward:function(){},moveTo:function(){},numberOfCards:0,setIsImageExpanded:function(){},shouldTriggerLoadMore:!1});function y(e){var t=e.attachmentType,n=e.ephemeralMediaState;return n!=null&&(s||(s=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").EPHEMERAL_IMAGE))&&(s||(s=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("RavenMessagingState").PERMANENT))}function C(e){var t=e.attachmentType,n=e.ephemeralMediaState;return n!=null&&(s||(s=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").EPHEMERAL_VIDEO))&&(s||(s=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("RavenMessagingState").PERMANENT))}function b(e,t,n,r){return n?r.hasMedia:t(r,"isPlayableMedia")!=null&&e(r,"isPlayableMedia")!=null}function v(e,t,n,a){var i=a.attachmentType;return b(e,t,n,a)?y(a)||(s||(s=o("I64"))).equal(i,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE)):!1}function S(e,t,n,a,i){var l=a.attachmentFbid,c=a.attachmentType,d=!1,m=!1,p=o("MAWClientMediaStatusUtils").getStatusDataFromLsdb({clientMediaStatus:i,statusKey:l}),_=p.hasStatus,f=p.statusData;if(_){var g=f!=null?f:{},h=g.validationResult;d=h!=null?o("MAWVideoAudioPlaybackErrorHandlerUtils").isInvalidVideo(a,h):!1,m=h!=null?o("MAWVideoAudioPlaybackErrorHandlerUtils").isUnsupportedVideo(a,h):!1}return!b(e,t,n,a)||d||m?!1:C(a)||(s||(s=o("I64"))).equal(c,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO))}function R(e,t){p(function(){e.forEach(function(e){try{e.attachment.hasMedia&&!(s||(s=o("I64"))).equal(e.attachment.attachmentType,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE))&&t(e.attachment,"usePreloadThumbnails");return}catch(e){return}})},[e,t])}function L(e){var t=o("react-compiler-runtime").c(37),n=e.attachments,a=e.children,i=e.getIsSecureThread,l=e.getPlayableUrl,s=e.getPreviewUrl,u=e.initialAttachment,d=f(u),m=d[0],p=d[1],_=f(!1),y=_[0],C=_[1],b=r("usePrevious")(m==null?void 0:m.messageId),L;t[0]!==n?(L=n.map(E),t[0]=n,t[1]=L):L=t[1];var k=L,I=r("useClientMediaStatus")(k);r("useMAWBulkMaybeAutoTriggerDownload")(k,"fullsize","preview",I);var T;if(t[2]!==n||t[3]!==I||t[4]!==i||t[5]!==l||t[6]!==s){var D;t[8]!==I||t[9]!==i||t[10]!==l||t[11]!==s?(D=function(t){var e=i(t);return v(l,s,e,t)?{attachment:t,type:g.Image}:S(l,s,e,t,I)?{attachment:t,type:g.Video}:null},t[8]=I,t[9]=i,t[10]=l,t[11]=s,t[12]=D):D=t[12],T=r("filterNulls")(n.map(D)),t[2]=n,t[3]=I,t[4]=i,t[5]=l,t[6]=s,t[7]=T}else T=t[7];var x=T,$;t[13]!==x||t[14]!==m?($=m==null?-1:x.findIndex(function(e){return e.attachment.attachmentFbid===m.attachmentFbid&&e.attachment.messageId===m.messageId}),t[13]=x,t[14]=m,t[15]=$):$=t[15];var P=$,N=b!=null&&(m==null?void 0:m.messageId)!==b&&P>x.length-5;R(x,s);var M=Math.max(0,x.length-1),w=P>0&&P!==-1,A=P<M&&P!==-1,F=x[P],O;t[16]!==x||t[17]!==P?(O=function(){var e,t=Math.max(P-1,0);p((e=x[t])==null?void 0:e.attachment)},t[16]=x,t[17]=P,t[18]=O):O=t[18];var B;t[19]!==x||t[20]!==P||t[21]!==M?(B=function(){var e,t=Math.min(P+1,M);p((e=x[t])==null?void 0:e.attachment)},t[19]=x,t[20]=P,t[21]=M,t[22]=B):B=t[22];var W;t[23]===Symbol.for("react.memo_cache_sentinel")?(W=function(t){p(t.attachment)},t[23]=W):W=t[23];var q;t[24]!==x||t[25]!==P||t[26]!==y||t[27]!==N||t[28]!==w||t[29]!==A||t[30]!==F||t[31]!==O||t[32]!==B?(q={canMoveBackward:w,canMoveForward:A,card:F,cards:x,currentIndex:P,isImageExpanded:y,moveBackward:O,moveForward:B,moveTo:W,numberOfCards:x.length,setIsImageExpanded:C,shouldTriggerLoadMore:N},t[24]=x,t[25]=P,t[26]=y,t[27]=N,t[28]=w,t[29]=A,t[30]=F,t[31]=O,t[32]=B,t[33]=q):q=t[33];var U=q,V;return t[34]!==a||t[35]!==U?(V=c.jsx(h.Provider,{value:U,children:a}),t[34]=a,t[35]=U,t[36]=V):V=t[36],V}function E(e){return{attachment:e,mediaRenderQpl:null,statusKey:e.attachmentFbid}}l.AttachmentMediaType=g,l.context=h,l.MWChatAttachmentMediaStateProviderFromAttachments=L}),98);
__d("MWChatAttachmentMediaNavigationHotkeys.react",["fbt","CometKeys","MWChatAttachmentMediaState.react","react","react-compiler-runtime","useLayerKeyCommands"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useContext,m=c.useMemo,p={key:r("CometKeys").LEFT},_={key:r("CometKeys").RIGHT},f={key:r("CometKeys").ESCAPE},g=s._(/*BTDS*/"Next item"),h=s._(/*BTDS*/"Previous item"),y=s._(/*BTDS*/"Close");function C(e){var t=o("react-compiler-runtime").c(18),n=e.children,a=e.onClose,i=d(o("MWChatAttachmentMediaState.react").context),l=i.isImageExpanded,s=i.moveBackward,c=i.moveForward,m=i.setIsImageExpanded,C;t[0]!==l||t[1]!==s?(C={command:p,description:g,handler:function(){!l&&s()}},t[0]=l,t[1]=s,t[2]=C):C=t[2];var b;t[3]!==l||t[4]!==c?(b={command:_,description:h,handler:function(){!l&&c()}},t[3]=l,t[4]=c,t[5]=b):b=t[5];var v;t[6]!==l||t[7]!==a||t[8]!==m?(v=a!=null?{command:f,description:y,handler:function(){if(l)return m(!1);a()}}:null,t[6]=l,t[7]=a,t[8]=m,t[9]=v):v=t[9];var S;t[10]!==C||t[11]!==b||t[12]!==v?(S=[C,b,v],t[10]=C,t[11]=b,t[12]=v,t[13]=S):S=t[13];var R=S,L;t[14]!==R?(L=R.filter(Boolean),t[14]=R,t[15]=L):L=t[15];var E=L;r("useLayerKeyCommands")(E);var k=n!=null?n:null,I;return t[16]!==k?(I=u.jsx(u.Fragment,{children:k}),t[16]=k,t[17]=I):I=t[17],I}l.keyLeft=p,l.keyRight=_,l.keyEscape=f,l.MWChatAttachmentMediaNavigationHotkeys=C}),226);
__d("MWChatAttachmentMediaUtils",["MWChatAttachmentMediaState.react"],(function(t,n,r,o,a,i,l){"use strict";var e="/images/comet/gray.png";function s(t){var n=t.card,r=t.getPlayableUrl,a=t.getPreviewUrl,i=n.attachment,l;if(i.hasMedia)try{l=a(i,"toFilmstripThumbnail")}catch(e){l=null}var s=l;if(n.type===o("MWChatAttachmentMediaState.react").AttachmentMediaType.Video&&l==null)try{s=r(i,"toFilmstripThumbnail")}catch(e){s=null}if(n.type===o("MWChatAttachmentMediaState.react").AttachmentMediaType.Image){var u;return{alt:(u=i.accessibilitySummaryText)!=null?u:"",backgroundColor:void 0,height:0,isUseImageResizing:void 0,mediaType:"image",uri:l!=null?l:e,width:0}}return{height:0,mediaType:"video",thumbnailUri:l!=null?l:e,uri:s!=null?s:e,width:0}}function u(t){var n=t.card,r=t.getPlayableUrl,a=t.getPreviewUrl,i=n.attachment,l;i.hasMedia&&(l=a(i,"toFilmstripThumbnailSuspends"));var s=l;if(n.type===o("MWChatAttachmentMediaState.react").AttachmentMediaType.Video&&l==null&&(s=r(i,"toFilmstripThumbnailSuspends")),n.type===o("MWChatAttachmentMediaState.react").AttachmentMediaType.Image){var u;return{alt:(u=i.accessibilitySummaryText)!=null?u:"",backgroundColor:void 0,height:0,isUseImageResizing:void 0,mediaType:"image",uri:l!=null?l:e,width:0}}return{height:0,mediaType:"video",thumbnailUri:l!=null?l:e,uri:s!=null?s:e,width:0}}l.loadingStateUri=e,l.toFilmstripThumbnail=s,l.toFilmstripThumbnailSuspends=u}),98);
__d("MWV2MediaViewerContext.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useMemo,c=s.createContext({getDownloadUrl:function(){},getPlayableUrl:function(){},getPreviewUrl:function(){},heroLoggingComponent:function(t){return null},loadMore:function(){},media:[]});function d(e){var t=o("react-compiler-runtime").c(10),n=e.children,r=e.getDownloadUrl,a=e.getPlayableUrl,i=e.getPreviewUrl,l=e.heroLoggingComponent,u=e.loadMore,d=e.media,m;t[0]!==r||t[1]!==a||t[2]!==i||t[3]!==l||t[4]!==u||t[5]!==d?(m={getDownloadUrl:r,getPlayableUrl:a,getPreviewUrl:i,heroLoggingComponent:l,loadMore:u,media:d},t[0]=r,t[1]=a,t[2]=i,t[3]=l,t[4]=u,t[5]=d,t[6]=m):m=t[6];var p=m,_;return t[7]!==n||t[8]!==p?(_=s.jsx(c.Provider,{value:p,children:n}),t[7]=n,t[8]=p,t[9]=_):_=t[9],_}l.context=c,l.MWV2MediaViewerContextProvider=d}),98);
__d("MWChatAttachmentMediaThumbnails.react",["CometMediaViewerFilmstrip.react","CometPlaceholder.react","MWChatAttachmentMediaState.react","MWChatAttachmentMediaUtils","MWV2MediaViewerContext.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useContext,d=u.useDeferredValue;function m(e){var t,n,a=o("react-compiler-runtime").c(23),i=e.activeCard,l=e.cards,u=e.getPreviewUrl,d=e.onSetImage,m=c(o("MWV2MediaViewerContext.react").context),p;a[0]!==m?(p=function(t,n){return t==null?"":m.getDownloadUrl(t,n)},a[0]=m,a[1]=p):p=a[1];var _=p,f;if(a[2]!==l||a[3]!==_||a[4]!==u){var g;a[6]!==_||a[7]!==u?(g=function(t){return o("MWChatAttachmentMediaUtils").toFilmstripThumbnail({card:t,getPlayableUrl:_,getPreviewUrl:u})},a[6]=_,a[7]=u,a[8]=g):g=a[8],f=l.map(g),a[2]=l,a[3]=_,a[4]=u,a[5]=f}else f=a[5];var h=f,y;if(a[9]!==(i==null||(t=i.attachment)==null?void 0:t.attachmentFbid)||a[10]!==(i==null||(n=i.attachment)==null?void 0:n.messageId)||a[11]!==l){var C,b,v,S,R;if(a[13]!==(i==null||(C=i.attachment)==null?void 0:C.attachmentFbid)||a[14]!==(i==null||(b=i.attachment)==null?void 0:b.messageId)){var L,E;R=function(t){var e,n;return t.attachment.attachmentFbid===(i==null||(e=i.attachment)==null?void 0:e.attachmentFbid)&&t.attachment.messageId===(i==null||(n=i.attachment)==null?void 0:n.messageId)},a[13]=i==null||(L=i.attachment)==null?void 0:L.attachmentFbid,a[14]=i==null||(E=i.attachment)==null?void 0:E.messageId,a[15]=R}else R=a[15];y=l.findIndex(R),a[9]=i==null||(v=i.attachment)==null?void 0:v.attachmentFbid,a[10]=i==null||(S=i.attachment)==null?void 0:S.messageId,a[11]=l,a[12]=y}else y=a[12];var k=y,I;a[16]!==l||a[17]!==d?(I=function(t){return d(l[t])},a[16]=l,a[17]=d,a[18]=I):I=a[18];var T;return a[19]!==k||a[20]!==h||a[21]!==I?(T=s.jsx(r("CometMediaViewerFilmstrip.react"),{activeIndex:k,images:h,onSetImage:I}),a[19]=k,a[20]=h,a[21]=I,a[22]=T):T=a[22],T}function p(e){var t=o("react-compiler-runtime").c(10),n=e.getPreviewUrl,a=e.shouldHide,i=a===void 0?!1:a,l=c(o("MWChatAttachmentMediaState.react").context),u=l.card,p=l.cards,_=l.moveTo,f=d(p),g;t[0]!==i?(g={0:{className:"xdj266r x11t971q xat24cr xvc5jky x193iq5w x6ikm8r x10wlt62"},1:{className:"xdj266r x11t971q xat24cr xvc5jky x193iq5w x6ikm8r x10wlt62 x1s85apg"}}[!!i<<0],t[0]=i,t[1]=g):g=t[1];var h;t[2]!==u||t[3]!==f||t[4]!==n||t[5]!==_?(h=s.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWChatAttachmentMediaThumbnails",children:s.jsx(m,{activeCard:u,cards:f,getPreviewUrl:n,onSetImage:_})}),t[2]=u,t[3]=f,t[4]=n,t[5]=_,t[6]=h):h=t[6];var y;return t[7]!==g||t[8]!==h?(y=s.jsx("div",babelHelpers.extends({},g,{"data-testid":void 0,children:h})),t[7]=g,t[8]=h,t[9]=y):y=t[9],y}l.default=p}),98);
__d("MWMediaViewerRenderQpl",["MWMediaRenderQplUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return o("MWMediaRenderQplUtils").useCommonMediaRenderQplForAttachment(e,t,"full_screen_view")}l.useMediaViewerRenderQpl=e}),98);
__d("MWV2MediaViewerDownloadControl.react",["fbt","MWV2MediaViewerActionButton.react","MWXIconDownload","MWXRowItem.react","MessengerWebUXLogger","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=s._(/*BTDS*/"Download");function d(e){var t=o("react-compiler-runtime").c(7),n=e.uri,a=r("MessengerWebUXLogger").useInteractionLogger(),i;t[0]!==n?(i={download:!0,target:"_blank",url:n},t[0]=n,t[1]=i):i=t[1];var l;t[2]!==a?(l=function(){a==null||a({eventName:"fsmv_download_click"})},t[2]=a,t[3]=l):l=t[3];var s;return t[4]!==i||t[5]!==l?(s=u.jsx(r("MWXRowItem.react"),{children:u.jsx(r("MWV2MediaViewerActionButton.react"),{icon:r("MWXIconDownload"),label:c,linkProps:i,onPress:l})}),t[4]=i,t[5]=l,t[6]=s):s=t[6],s}l.default=d}),226);
__d("useMWV2MessageAttachmentForwardAction",["useMWV2MessageForwardAction"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,o){return r("useMWV2MessageForwardAction")(e,t,n,o)}l.default=e}),98);
__d("MWV2MediaViewerForwardControl.react",["fbt","Int64Hooks","LSMessagingThreadTypeUtil","MWV2MediaViewerActionButton.react","MWXIconShare","MWXRowItem.react","ODS","react","react-compiler-runtime","useMWHasForwardAction","useMWV2MessageAttachmentForwardAction"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=e||(e=o("react"));function d(e){var t=o("react-compiler-runtime").c(8),n=e.attachment,a=e.message,i=e.thread,l=n==null?void 0:n.attachmentFbid,d;t[0]!==i.threadType?(d=o("LSMessagingThreadTypeUtil").isArmadilloSecure(i.threadType),t[0]=i.threadType,t[1]=d):d=t[1];var m=d,p,_;t[2]!==i.threadType?(p=function(){return i.threadType},_=[i.threadType],t[2]=i.threadType,t[3]=p,t[4]=_):(p=t[3],_=t[4]);var f=o("Int64Hooks").useMemoInt64(p,_),g=r("useMWV2MessageAttachmentForwardAction")(m,a,f,n),h=r("useMWHasForwardAction")(i.threadType,a,n),y=h.hasForwardAction,C=l!=null&&y;if(l==null||!C)return null;var b;t[5]===Symbol.for("react.memo_cache_sentinel")?(b=s._(/*BTDS*/"Forward"),t[5]=b):b=t[5];var v=b,S;return t[6]!==g?(S=c.jsx(r("MWXRowItem.react"),{children:c.jsx(r("MWV2MediaViewerActionButton.react"),{icon:r("MWXIconShare"),label:v,onPress:function(){(u||(u=o("ODS"))).bumpEntityKey(3185,"mwchat_media_viewer","forward"),g()},testid:void 0})}),t[6]=g,t[7]=S):S=t[7],S}l.default=d}),226);
__d("MWV2MediaViewerControls.react",["MWV2MediaViewerCloseControl.react","MWV2MediaViewerContext.react","MWV2MediaViewerDownloadControl.react","MWV2MediaViewerForwardControl.react","MWXRow.react","cr:9742","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext;function c(e){var t=o("react-compiler-runtime").c(20),a=e.attachment,i=e.message,l=e.onClose,c=e.thread,d=u(o("MWV2MediaViewerContext.react").context),m;t[0]!==a||t[1]!==d?(m=d.getDownloadUrl(a,"MWV2MediaViewerControls"),t[0]=a,t[1]=d,t[2]=m):m=t[2];var p=m,_;t[3]!==a||t[4]!==i?(_=i!=null&&a!=null&&n("cr:9742")!=null&&s.jsx(n("cr:9742"),{attachment:a,message:i}),t[3]=a,t[4]=i,t[5]=_):_=t[5];var f;t[6]!==i||t[7]!==p?(f=i!=null&&p!=null&&s.jsx(r("MWV2MediaViewerDownloadControl.react"),{uri:p}),t[6]=i,t[7]=p,t[8]=f):f=t[8];var g;t[9]!==a||t[10]!==i||t[11]!==c?(g=i!=null&&a!=null?s.jsx(r("MWV2MediaViewerForwardControl.react"),{attachment:a,message:i,thread:c}):null,t[9]=a,t[10]=i,t[11]=c,t[12]=g):g=t[12];var h;t[13]!==l?(h=l!=null?s.jsx(r("MWV2MediaViewerCloseControl.react"),{onClose:l}):null,t[13]=l,t[14]=h):h=t[14];var y;return t[15]!==_||t[16]!==f||t[17]!==g||t[18]!==h?(y=s.jsxs(r("MWXRow.react"),{paddingTop:0,spacing:8,testid:void 0,children:[_,f,g,h]}),t[15]=_,t[16]=f,t[17]=g,t[18]=h,t[19]=y):y=t[19],y}l.default=c}),98);
__d("MWV2MediaViewerControlsContainer.react",["CometPlaceholder.react","MWV2MediaViewerControls.react","MWV2MediaViewerControlsFallback.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(10),n=e.attachment,a=e.message,i=e.onClose,l=e.thread,u;t[0]!==i?(u=i!=null?s.jsx(r("MWV2MediaViewerControlsFallback.react"),{onClose:i}):null,t[0]=i,t[1]=u):u=t[1];var c;t[2]!==n||t[3]!==a||t[4]!==i||t[5]!==l?(c=s.jsx(r("MWV2MediaViewerControls.react"),{attachment:n,message:a,onClose:i,thread:l}),t[2]=n,t[3]=a,t[4]=i,t[5]=l,t[6]=c):c=t[6];var d;return t[7]!==u||t[8]!==c?(d=s.jsx(r("CometPlaceholder.react"),{fallback:u,name:"MWV2MediaViewerContent.Controls",children:c}),t[7]=u,t[8]=c,t[9]=d):d=t[9],d}l.default=u}),98);
__d("MWV2MediaViewerAspectRatioContainer.react",["BaseAspectRatioContainer.react","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c={marginTop:"xr1yuqi",marginInlineEnd:"x11t971q",marginBottom:"x4ii5y1",marginInlineStart:"xvc5jky",maxHeight:"x1jols5v",maxWidth:"xf68679",width:"xh8yej3",$$css:!0},d={transform:"xsqj5wx",$$css:!0},m={containerMaxSize:function(t,n,r){return[c,{aspectRatio:n!=null?"x10y9f9r":n,$$css:!0},{"--x-aspectRatio":n!=null?n:void 0,"--x-maxHeight":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})("min(calc(100vh - "+r+"px),"+(t!=null?t:1e4)+"px)"),"--x-maxWidth":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})("min(calc((100vh - "+r+"px) * "+n+"),"+(t!=null?t:1e4)*n+"px)")}]},scale:function(t){return[d,{"--x-transform":"scale3d("+t+", "+t+", 1)"!=null?"scale3d("+t+", "+t+", 1)":void 0}]}};function p(t){var n=o("react-compiler-runtime").c(17),a=t.children,i=t.height,l=t.imageContainerRef,s=t.imageExpansionFactor,c=t.isImageExpanded,d=t.onClickOutsideOfChildren,p=t.outsideContainerRef,f=t.width,g=s===void 0?1:s,h=c===void 0?!1:c,y=f!=null&&i!=null?f/i:1,C;n[0]===Symbol.for("react.memo_cache_sentinel")?(C={className:"x6s0dn4 x78zum5 x5yr21d xl56j7k xh8yej3"},n[0]=C):C=n[0];var b;n[1]!==y||n[2]!==i||n[3]!==g||n[4]!==h?(b=(e||(e=r("stylex"))).props(m.containerMaxSize(i,y,76),h&&m.scale(g)),n[1]=y,n[2]=i,n[3]=g,n[4]=h,n[5]=b):b=n[5];var v;n[6]!==y||n[7]!==a?(v=u.jsx(r("BaseAspectRatioContainer.react"),{aspectRatio:y,children:a}),n[6]=y,n[7]=a,n[8]=v):v=n[8];var S;n[9]!==l||n[10]!==b||n[11]!==v?(S=u.jsx("div",babelHelpers.extends({},b,{"aria-hidden":!0,onClick:_,ref:l,children:v})),n[9]=l,n[10]=b,n[11]=v,n[12]=S):S=n[12];var R;return n[13]!==d||n[14]!==p||n[15]!==S?(R=u.jsx("div",babelHelpers.extends({"aria-hidden":!0},C,{onClick:d,ref:p,children:S})),n[13]=d,n[14]=p,n[15]=S,n[16]=R):R=n[16],R}function _(e){e.stopPropagation()}l.default=p}),98);
__d("MWV2MediaViewerDimensions",["I64"],(function(t,n,r,o,a,i,l){"use strict";var e,s=1.75;function u(t){return t.previewHeightLarge!=null?(e||(e=o("I64"))).to_float(t.previewHeightLarge):t.previewHeight!=null?(e||(e=o("I64"))).to_float(t.previewHeight):void 0}function c(t){return t.previewWidthLarge!=null?(e||(e=o("I64"))).to_float(t.previewWidthLarge):t.previewWidth!=null?(e||(e=o("I64"))).to_float(t.previewWidth):void 0}function d(e){return{height:u(e),width:c(e)}}l.IMAGE_EXPANSION_FACTOR=s,l.getLargestAttachmentDimensions=d}),98);
__d("MWV2MediaViewerItemImage.react",["fbt","BaseImage.react","I64","MWAnimatedImageControlsUtil","MWAnimatedImageThumbnailWithPlayButton.react","MWChatAttachmentMediaState.react","MWV2MediaViewerContext.react","MWV2MediaViewerDimensions","MWXIconHd","MWXIconStrict.react","MWXPressable.react","MWXThreadThemeColor","MessagingAttachmentType","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=e||(e=o("react")),d=e,m=d.useContext,p=d.useEffect,_=d.useRef,f=d.useState;function g(e){var t=o("react-compiler-runtime").c(28),n=e.attachment,a=e.mediaRenderQpl,i=o("MWAnimatedImageControlsUtil").useGetMessengerAutoplaySetting(),l=m(o("MWChatAttachmentMediaState.react").context),d=l.isImageExpanded,g=m(o("MWV2MediaViewerContext.react").context),y=g.getPlayableUrl,C=g.heroLoggingComponent,b=_(null),v=f(!1),S=v[0],R=v[1],L,E;t[0]!==a?(L=function(){var e;b.current!=null&&(e=b.current)!=null&&e.complete&&a.endSuccessAfterDelay()},E=[a],t[0]=a,t[1]=L,t[2]=E):(L=t[1],E=t[2]),p(L,E);var k;t[3]!==n?(k=o("MWV2MediaViewerDimensions").getLargestAttachmentDimensions(n),t[3]=n,t[4]=k):k=t[4];var I=k,T=I.height,D=I.width,x;t[5]!==n.attachmentType?(x=(u||(u=o("I64"))).to_int32(n.attachmentType),t[5]=n.attachmentType,t[6]=x):x=t[6];var $=x===r("MessagingAttachmentType").ANIMATED_IMAGE,P;t[7]!==n||t[8]!==y||t[9]!==a?(P=y(n,"MediaViewerImage",a),t[7]=n,t[8]=y,t[9]=a,t[10]=P):P=t[10];var N=P;if(N!=null){var M=$&&i!==o("MWAnimatedImageControlsUtil").MWAutoplayAnimationsSetting.ON,w;t[11]!==C?(w=C("MWV2MediaViewerImage"),t[11]=C,t[12]=w):w=t[12];var A;t[13]!==n||t[14]!==T||t[15]!==S||t[16]!==a||t[17]!==M||t[18]!==N||t[19]!==D?(A=M?S===!1?c.jsx(o("MWAnimatedImageThumbnailWithPlayButton.react").MWAnimatedImageThumbnailWithPlayButton,{connectBottom:!1,connectTop:!1,dbAttachment:n,entryPoint:o("MWAnimatedImageThumbnailWithPlayButton.react").AnimatedImageEntryPoint.MediaViewer,mediaRenderQpl:a,message:null,onPlay:function(){return R(!0)},outgoing:!1,previewHeight:T,previewWidth:D}):c.jsx(r("MWXPressable.react"),{"aria-label":s._(/*BTDS*/"Pause GIF"),hideHoverOverlay:!0,onPress:function(){R(!1)},children:c.jsx(r("BaseImage.react"),{height:"100%",objectFit:"contain",onError:function(){a.endFailAfterDelay("load-image-error")},onLoad:function(){a.endSuccessAfterDelay()},ref:b,src:N,width:"100%"})}):c.jsx(r("BaseImage.react"),{height:"100%",objectFit:"contain",onError:function(){a.endFailAfterDelay("load-image-error")},onLoad:function(){a.endSuccessAfterDelay()},ref:b,src:N,width:"100%"}),t[13]=n,t[14]=T,t[15]=S,t[16]=a,t[17]=M,t[18]=N,t[19]=D,t[20]=A):A=t[20];var F;t[21]!==n||t[22]!==d?(F=c.jsx(h,{attachment:n,shouldHide:d}),t[21]=n,t[22]=d,t[23]=F):F=t[23];var O;return t[24]!==w||t[25]!==A||t[26]!==F?(O=c.jsxs(c.Fragment,{children:[w,A,F]}),t[24]=w,t[25]=A,t[26]=F,t[27]=O):O=t[27],O}else return a.endFailAfterDelay("missing-playable-url"),null}function h(e){var t=o("react-compiler-runtime").c(6),n=e.attachment,a=e.shouldHide,i=a===void 0?!1:a,l=n,s=l.isHd===!0;if(!s)return null;var u;t[0]!==i?(u={0:{className:"x78zum5 x5yr21d x47corl x10l6tqk xh8yej3"},1:{className:"x5yr21d x47corl x10l6tqk xh8yej3 x1s85apg"}}[!!i<<0],t[0]=i,t[1]=u):u=t[1];var d;t[2]===Symbol.for("react.memo_cache_sentinel")?(d={className:"xdg88n9 x10l6tqk xomnu4r"},t[2]=d):d=t[2];var m;t[3]===Symbol.for("react.memo_cache_sentinel")?(m=c.jsx("div",babelHelpers.extends({},d,{children:c.jsx(r("MWXIconStrict.react"),{color:o("MWXThreadThemeColor").mwxThreadThemeColor("rgba(255,255,255,0.7)"),icon:r("MWXIconHd"),size:24})})),t[3]=m):m=t[3];var p;return t[4]!==u?(p=c.jsx("div",babelHelpers.extends({},u,{children:m})),t[4]=u,t[5]=p):p=t[5],p}l.default=g}),226);
__d("MWV2MediaViewerItemVideo.react",["MWChatVideoPlayer.react","MWV2MediaViewerContext.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext;function c(e){var t=o("react-compiler-runtime").c(11),n=e.attachment,a=e.mediaRenderQpl,i=u(o("MWV2MediaViewerContext.react").context),l=i.getPlayableUrl,c;t[0]!==n||t[1]!==l||t[2]!==a?(c=l(n,"MediaViewerVideo",a),t[0]=n,t[1]=l,t[2]=a,t[3]=c):c=t[3];var d=c;if(d!=null){var m;t[4]===Symbol.for("react.memo_cache_sentinel")?(m={className:"x78zum5 x1iyjqo2 xmz0i5r"},t[4]=m):m=t[4];var p=n.gifPlayback===!0,_;return t[5]!==n.attachmentFbid||t[6]!==n.gifPlayback||t[7]!==a||t[8]!==p||t[9]!==d?(_=s.jsx("div",babelHelpers.extends({},m,{children:s.jsx(r("MWChatVideoPlayer.react"),{autoPlaySetting:p,controls:"mwchat",fbid:n.attachmentFbid,gifPlayback:n.gifPlayback,hideExpandButton:!1,isMediaViewer:!0,mediaRenderQpl:a,originalHeight:1e3,originalWidth:1e3,sdSrc:d,shouldForcePauseOnClick:!1})})),t[5]=n.attachmentFbid,t[6]=n.gifPlayback,t[7]=a,t[8]=p,t[9]=d,t[10]=_):_=t[10],_}else return a.endFailAfterDelay("missing-playable-url"),null}l.default=c}),98);
__d("MWV2MediaViewerNullState.react",["fbt","CometColumn.react","CometColumnItem.react","FDSNullState.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(){var e=o("react-compiler-runtime").c(1),t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=u.jsx(r("CometColumn.react"),{expanding:!0,verticalAlign:"center",children:u.jsx(r("CometColumnItem.react"),{children:u.jsx(r("FDSNullState.react"),{headline:s._(/*BTDS*/"Sorry, this content isn't available right now")})})}),e[0]=t):t=e[0],t}l.default=c}),226);
__d("MWV2MediaViewerItem.react",["I64","LSIntEnum","MWChatAttachmentMediaState.react","MWMediaViewerRenderQpl","MWV2MediaViewerAspectRatioContainer.react","MWV2MediaViewerDimensions","MWV2MediaViewerItemImage.react","MWV2MediaViewerItemVideo.react","MWV2MediaViewerNullState.react","MessagingAttachmentType","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=e||(e=o("react")),d=e,m=d.useContext,p=d.useRef;function _(e){var t=o("react-compiler-runtime").c(10),n=e.attachment,a=e.onClose,i=e.threadType,l=n.attachmentType;if(!((s||(s=o("I64"))).equal(l,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE))||(s||(s=o("I64"))).equal(l,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE))||(s||(s=o("I64"))).equal(l,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO)))){var d;return t[0]===Symbol.for("react.memo_cache_sentinel")?(d=c.jsx(r("MWV2MediaViewerNullState.react"),{}),t[0]=d):d=t[0],d}var m;t[1]===Symbol.for("react.memo_cache_sentinel")?(m={className:"x1ey2m1c xtijo5x x1o0tod x10l6tqk x13vifvy"},t[1]=m):m=t[1];var p;t[2]!==a?(p=c.jsx("div",babelHelpers.extends({"aria-hidden":!0},m,{"data-testid":void 0,onClick:a})),t[2]=a,t[3]=p):p=t[3];var _;t[4]!==n||t[5]!==i?(_=c.jsx(f,{attachment:n,threadType:i}),t[4]=n,t[5]=i,t[6]=_):_=t[6];var g;return t[7]!==p||t[8]!==_?(g=c.jsxs(c.Fragment,{children:[p,_]}),t[7]=p,t[8]=_,t[9]=g):g=t[9],g}function f(e){var t=o("react-compiler-runtime").c(11),n=e.attachment,a=e.onClose,i=e.threadType,l=o("MWMediaViewerRenderQpl").useMediaViewerRenderQpl(n,i),d=m(o("MWChatAttachmentMediaState.react").context),_=d.isImageExpanded,f=_?o("MWV2MediaViewerDimensions").IMAGE_EXPANSION_FACTOR:1,g=p(null),h=p(null),y;t[0]!==n?(y=o("MWV2MediaViewerDimensions").getLargestAttachmentDimensions(n),t[0]=n,t[1]=y):y=t[1];var C=y,b=C.height,v=C.width,S=n.attachmentType,R;return t[2]!==n||t[3]!==b||t[4]!==f||t[5]!==_||t[6]!==l||t[7]!==a||t[8]!==S||t[9]!==v?(R=(s||(s=o("I64"))).equal(S,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE))||(s||(s=o("I64"))).equal(S,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE))?c.jsx(r("MWV2MediaViewerAspectRatioContainer.react"),{height:b,imageContainerRef:h,imageExpansionFactor:f,isImageExpanded:_,onClickOutsideOfChildren:a,outsideContainerRef:g,width:v,children:c.jsx(r("MWV2MediaViewerItemImage.react"),{attachment:n,mediaRenderQpl:l})}):(s||(s=o("I64"))).equal(S,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO))?c.jsx(r("MWV2MediaViewerItemVideo.react"),{attachment:n,mediaRenderQpl:l}):null,t[2]=n,t[3]=b,t[4]=f,t[5]=_,t[6]=l,t[7]=a,t[8]=S,t[9]=v,t[10]=R):R=t[10],R}l.default=_}),98);
__d("MWV2MediaViewerContent.react",["fbt","CometPlaceholder.react","FDSBlurredBackgroundImage.react","I64","LSIntEnum","MWChatAttachmentMediaNavigationHotkeys.react","MWChatAttachmentMediaState.react","MWChatAttachmentMediaThumbnails.react","MWChatMediaViewerNavigationTapTarget.react","MWV2MediaViewerContainer.react","MWV2MediaViewerContext.react","MWV2MediaViewerControlsContainer.react","MWV2MediaViewerItem.react","MWV2MediaViewerNullState.react","MWXColumn.react","MWXColumnItem.react","MWXRow.react","MWXRowItem.react","MessagingAttachmentType","ReQL","ReQLSuspense","react","react-compiler-runtime","useReStore","useShouldShowPlaybackErrorFallback","useShouldShowUnsupportedCodecFallback"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m=u||(u=o("react")),p=u,_=p.useContext,f=p.useEffect,g={mediaItem:{marginTop:"x14vqqas",marginInlineEnd:"xbmvrgn",marginBottom:"xod5an3",marginInlineStart:"x1diwwjn",$$css:!0},mediaRow:{minHeight:"x2lwn1j",$$css:!0},noOverflow:{maxWidth:"x193iq5w",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}};function h(e){var t=o("react-compiler-runtime").c(6),n=e.attachment,a=_(o("MWV2MediaViewerContext.react").context),i=a.getPreviewUrl;if(n==null||(c||(c=o("I64"))).equal(n.attachmentType,(d||(d=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE)))return null;var l;t[0]!==n||t[1]!==i?(l=i(n,"BlurredBackground"),t[0]=n,t[1]=i,t[2]=l):l=t[2];var s=l;if(s==null)return null;var u;t[3]===Symbol.for("react.memo_cache_sentinel")?(u={className:"x1ey2m1c xtijo5x x1o0tod xuzhngd x10l6tqk x13vifvy"},t[3]=u):u=t[3];var p;return t[4]!==s?(p=m.jsx("div",babelHelpers.extends({},u,{children:m.jsx(r("FDSBlurredBackgroundImage.react"),{src:s})})),t[4]=s,t[5]=p):p=t[5],p}function y(t){var n=o("react-compiler-runtime").c(62),a=t.initialAttachment,l=t.onClose,u=t.thread,c=_(o("MWChatAttachmentMediaState.react").context),d=c.canMoveBackward,p=c.canMoveForward,y=c.card,C=c.isImageExpanded,b=c.moveBackward,v=c.moveForward,S=c.shouldTriggerLoadMore,R=_(o("MWV2MediaViewerContext.react").context),L=R.getPreviewUrl,E=R.loadMore,k=(e||(e=r("useReStore")))(),I=a==null?void 0:a.threadKey,T=a==null?void 0:a.messageId,D;n[0]!==k.tables.attachments||n[1]!==T||n[2]!==I?(D=function(){return o("ReQL").fromTableDescending(k.tables.attachments).getKeyRange(I,T)},n[0]=k.tables.attachments,n[1]=T,n[2]=I,n[3]=D):D=n[3];var x;n[4]!==k||n[5]!==T||n[6]!==I?(x=[k,T,I],n[4]=k,n[5]=T,n[6]=I,n[7]=x):x=n[7];var $=o("ReQLSuspense").useFirst(D,x,i.id+":113")!=null,P=y!=null?y.attachment:$?a:void 0,N;n[8]!==P||n[9]!==k.tables.messages?(N=function(){return(P==null?void 0:P.messageId)==null?o("ReQL").empty():o("ReQL").fromTableAscending(k.tables.messages.index("messageId")).getKeyRange(P.messageId)},n[8]=P,n[9]=k.tables.messages,n[10]=N):N=n[10];var M=P==null?void 0:P.messageId,w;n[11]!==k.tables.messages||n[12]!==M?(w=[M,k.tables.messages],n[11]=k.tables.messages,n[12]=M,n[13]=w):w=n[13];var A=o("ReQLSuspense").useFirst(N,w,i.id+":129"),F=S,O,B;n[14]!==E||n[15]!==F?(O=function(){F&&E()},B=[F,E],n[14]=E,n[15]=F,n[16]=O,n[17]=B):(O=n[16],B=n[17]),f(O,B);var W=r("useShouldShowUnsupportedCodecFallback")(P),q=r("useShouldShowPlaybackErrorFallback")(P),U;n[18]!==P||n[19]!==q||n[20]!==W||n[21]!==l||n[22]!==u?(U=P==null?m.jsx(r("MWV2MediaViewerNullState.react"),{}):!W&&!q?m.jsx(r("MWV2MediaViewerItem.react"),{attachment:P,onClose:l,threadType:u.threadType}):null,n[18]=P,n[19]=q,n[20]=W,n[21]=l,n[22]=u,n[23]=U):U=n[23];var V=U,H;n[24]!==P||n[25]!==A||n[26]!==l||n[27]!==u?(H=m.jsx(r("MWV2MediaViewerControlsContainer.react"),{attachment:P,message:A,onClose:l,thread:u}),n[24]=P,n[25]=A,n[26]=l,n[27]=u,n[28]=H):H=n[28];var G;n[29]!==P?(G=m.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWV2MediaViewerContent.BlurredBackground",children:m.jsx(h,{attachment:P})}),n[29]=P,n[30]=G):G=n[30];var z;n[31]===Symbol.for("react.memo_cache_sentinel")?(z=[g.mediaRow,g.noOverflow],n[31]=z):z=n[31];var j;n[32]===Symbol.for("react.memo_cache_sentinel")?(j=s._(/*BTDS*/"Previous photo"),n[32]=j):j=n[32];var K=!d,Q;n[33]!==C||n[34]!==b||n[35]!==K?(Q=m.jsx(r("MWXRowItem.react"),{children:m.jsx(r("MWChatMediaViewerNavigationTapTarget.react"),{direction:"previous",label:j,onClick:b,shouldHide:K,shouldHideWithoutTransition:C,testid:void 0})}),n[33]=C,n[34]=b,n[35]=K,n[36]=Q):Q=n[36];var X;n[37]!==V?(X=m.jsx(r("MWXRowItem.react"),{expanding:!0,verticalAlign:"stretch",xstyle:g.mediaItem,children:m.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWV2MediaViewerContent.MediaContent",children:V})}),n[37]=V,n[38]=X):X=n[38];var Y;n[39]===Symbol.for("react.memo_cache_sentinel")?(Y=s._(/*BTDS*/"Next photo"),n[39]=Y):Y=n[39];var J=!p,Z;n[40]!==C||n[41]!==v||n[42]!==J?(Z=m.jsx(r("MWXRowItem.react"),{children:m.jsx(r("MWChatMediaViewerNavigationTapTarget.react"),{direction:"next",label:Y,onClick:v,shouldHide:J,shouldHideWithoutTransition:C,testid:void 0})}),n[40]=C,n[41]=v,n[42]=J,n[43]=Z):Z=n[43];var ee;n[44]!==Q||n[45]!==X||n[46]!==Z?(ee=m.jsx(r("MWXColumnItem.react"),{expanding:!0,verticalAlign:"center",children:m.jsxs(r("MWXRow.react"),{align:"justify",expanding:!0,paddingHorizontal:0,paddingVertical:0,spacingHorizontal:0,verticalAlign:"stretch",xstyle:z,children:[Q,X,Z]})}),n[44]=Q,n[45]=X,n[46]=Z,n[47]=ee):ee=n[47];var te;n[48]!==L||n[49]!==C?(te=m.jsx(r("MWXColumnItem.react"),{children:m.jsx(r("MWChatAttachmentMediaThumbnails.react"),{getPreviewUrl:L,shouldHide:C})}),n[48]=L,n[49]=C,n[50]=te):te=n[50];var ne;n[51]!==ee||n[52]!==te?(ne=m.jsxs(r("MWXColumn.react"),{align:"stretch",expanding:!0,paddingHorizontal:0,verticalAlign:"space-between",children:[ee,te]}),n[51]=ee,n[52]=te,n[53]=ne):ne=n[53];var re;n[54]!==C||n[55]!==G||n[56]!==ne||n[57]!==H?(re=m.jsxs(r("MWV2MediaViewerContainer.react"),{actions:H,hideActions:C,children:[null,G,ne]}),n[54]=C,n[55]=G,n[56]=ne,n[57]=H,n[58]=re):re=n[58];var oe=re;if(l!=null){var ae;return n[59]!==oe||n[60]!==l?(ae=m.jsx(o("MWChatAttachmentMediaNavigationHotkeys.react").MWChatAttachmentMediaNavigationHotkeys,{onClose:l,children:oe}),n[59]=oe,n[60]=l,n[61]=ae):ae=n[61],ae}return oe}l.default=y}),226);
__d("useMWMaybeInboxMediaRestoreLoop",["react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("react-compiler-runtime").c(1),n;return t[0]===Symbol.for("react.memo_cache_sentinel")?(n={onEBOnboarded:u,startMediaSync:s},t[0]=n):n=t[0],n}function s(){}function u(){}l.default=e}),98);
__d("useMWV2MediaViewerOpenDownloadUrl",["react","react-compiler-runtime","useMWV2MediaViewerOpenPlayableUrl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(){var e=o("react-compiler-runtime").c(2),t=r("useMWV2MediaViewerOpenPlayableUrl")(),n;return e[0]!==t?(n=function(n,r,o){var e=t(n,r,o);if(e!=null){var a=new URL(e);return a.searchParams.set("dl","1"),a.toString()}},e[0]=t,e[1]=n):n=e[1],n}l.default=u}),98);
__d("MWV2MediaViewerCutoverWrapper.react",["LSThreadMediaGalleryGroup","MWChatAttachmentMediaState.react","MWMessageSearchStatusTypes","MWV2MediaViewerContext.react","emptyFunction","justknobx","react","react-compiler-runtime","useMAWLoadMoreCutoverThreadSharedAttachments","useMWMaybeInboxMediaRestoreLoop","useMWMediaGalleryRestoreStatus","useMWV2MediaViewerOpenDownloadUrl","useMWV2MediaViewerOpenPlayableUrl","useMWV2MediaViewerOpenPreviewUrl","useMWV2MediaViewerSecurePlayableUrl_CausesSuspense","useMWV2MediaViewerSecurePreviewUrl_CausesSuspense"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useCallback;function c(e){var t=o("react-compiler-runtime").c(30),n=e.children,a=e.initialAttachment,i=e.openThreadKey,l=e.secureThreadKey,u=e.threadType,c;t[0]!==l||t[1]!==u?(c={threadKey:l,threadType:u},t[0]=l,t[1]=u,t[2]=c):c=t[2],r("useMWMaybeInboxMediaRestoreLoop")(c);var m;t[3]!==l||t[4]!==u?(m={threadKey:l,threadType:u},t[3]=l,t[4]=u,t[5]=m):m=t[5];var p=r("useMWMediaGalleryRestoreStatus")(m),_=p===o("MWMessageSearchStatusTypes").RestoreStatus.IN_PROGRESS,f;t[6]===Symbol.for("react.memo_cache_sentinel")?(f={entrypoint:"media_viewer"},t[6]=f):f=t[6];var g;t[7]===Symbol.for("react.memo_cache_sentinel")?(g=r("justknobx")._("3233"),t[7]=g):g=t[7];var h=r("useMAWLoadMoreCutoverThreadSharedAttachments")(l,i,u,f,r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS,_,g),y=h.attachments,C=h.onLoadMore,b=d,v=r("useMWV2MediaViewerOpenPreviewUrl")(),S=r("useMWV2MediaViewerOpenPlayableUrl")(),R=r("useMWV2MediaViewerOpenDownloadUrl")(),L=r("useMWV2MediaViewerSecurePreviewUrl_CausesSuspense")(),E=r("useMWV2MediaViewerSecurePlayableUrl_CausesSuspense")(),k;t[8]!==v||t[9]!==L?(k=function(t,n,r){return t?b(t)?L(t,n,r):v(t,n,r):""},t[8]=v,t[9]=L,t[10]=k):k=t[10];var I=k,T;t[11]!==S||t[12]!==E?(T=function(t,n,r){return t==null?"":b(t)?E(t,n,r):S(t,n,r)},t[11]=S,t[12]=E,t[13]=T):T=t[13];var D=T,x;t[14]!==R||t[15]!==E?(x=function(t,n,r){return t==null?"":b(t)?E(t,n,r):R(t,n,r)},t[14]=R,t[15]=E,t[16]=x):x=t[16];var $=x,P;t[17]!==y||t[18]!==n||t[19]!==D||t[20]!==I||t[21]!==a?(P=s.jsx(o("MWChatAttachmentMediaState.react").MWChatAttachmentMediaStateProviderFromAttachments,{attachments:y,getIsSecureThread:b,getPlayableUrl:D,getPreviewUrl:I,initialAttachment:a,children:n}),t[17]=y,t[18]=n,t[19]=D,t[20]=I,t[21]=a,t[22]=P):P=t[22];var N;return t[23]!==y||t[24]!==$||t[25]!==D||t[26]!==I||t[27]!==C||t[28]!==P?(N=s.jsx(o("MWV2MediaViewerContext.react").MWV2MediaViewerContextProvider,{getDownloadUrl:$,getPlayableUrl:D,getPreviewUrl:I,heroLoggingComponent:r("emptyFunction"),loadMore:C,media:y,children:P}),t[23]=y,t[24]=$,t[25]=D,t[26]=I,t[27]=C,t[28]=P,t[29]=N):N=t[29],N}function d(e){return!((e==null?void 0:e.transportKey)==="FBBroker"||(e==null?void 0:e.transportKey)==="FBLegacyBroker")}l.default=c}),98);
__d("MWV2MediaViewerOpenWrapper.react",["CometHero.react","LSIntEnum","MWChatAttachmentMediaState.react","MWSharedAttachmentsSectionHooks","MWV2MediaViewerContext.react","react","react-compiler-runtime","useLoadMoreThreadSharedAttachments.react","useMWMediaLoadingQplLogger","useMWV2MediaViewerOpenDownloadUrl","useMWV2MediaViewerOpenPlayableUrl","useMWV2MediaViewerOpenPreviewUrl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e.useCallback;function d(e){var t=o("react-compiler-runtime").c(25),n=e.children,a=e.initialAttachment,i=e.thread,l=o("MWSharedAttachmentsSectionHooks").useQueryMediaAttachments(i.threadKey),c=l[0],d=l[1],_=l[2],f=l[4],g;t[0]!==d?(g=(s||(s=o("LSIntEnum"))).unwrapIntEnum(d),t[0]=d,t[1]=g):g=t[1];var h;t[2]!==g||t[3]!==i.threadType?(h={entrypoint:"media_viewer",galleryGroup:g,threadType:i.threadType},t[2]=g,t[3]=i.threadType,t[4]=h):h=t[4];var y=r("useMWMediaLoadingQplLogger")(h),C=r("useLoadMoreThreadSharedAttachments.react")(d,i.threadKey,y.logLoadMediaStart),b=f!=null?f:!0,v;t[5]!==_||t[6]!==C||t[7]!==c||t[8]!==y.logLoadMediaCancel||t[9]!==y.logLoadMediaSuccess||t[10]!==b?(v={attachmentsRange:_,hasMore:b,loadMore:C,logLoadMediaCancel:y.logLoadMediaCancel,logLoadMediaSuccess:y.logLoadMediaSuccess,media:c},t[5]=_,t[6]=C,t[7]=c,t[8]=y.logLoadMediaCancel,t[9]=y.logLoadMediaSuccess,t[10]=b,t[11]=v):v=t[11];var S=o("MWSharedAttachmentsSectionHooks").useLoader(v),R=S[1],L=r("useMWV2MediaViewerOpenPreviewUrl")(),E=r("useMWV2MediaViewerOpenPlayableUrl")(),k=r("useMWV2MediaViewerOpenDownloadUrl")(),I=p,T;t[12]!==n||t[13]!==E||t[14]!==L||t[15]!==a||t[16]!==c?(T=u.jsx(o("MWChatAttachmentMediaState.react").MWChatAttachmentMediaStateProviderFromAttachments,{attachments:c,getIsSecureThread:I,getPlayableUrl:E,getPreviewUrl:L,initialAttachment:a,children:n}),t[12]=n,t[13]=E,t[14]=L,t[15]=a,t[16]=c,t[17]=T):T=t[17];var D;return t[18]!==k||t[19]!==E||t[20]!==L||t[21]!==R||t[22]!==c||t[23]!==T?(D=u.jsx(o("MWV2MediaViewerContext.react").MWV2MediaViewerContextProvider,{getDownloadUrl:k,getPlayableUrl:E,getPreviewUrl:L,heroLoggingComponent:m,loadMore:R,media:c,children:T}),t[18]=k,t[19]=E,t[20]=L,t[21]=R,t[22]=c,t[23]=T,t[24]=D):D=t[24],D}function m(e){return u.jsx(r("CometHero.react"),{description:e})}m.displayName=m.name+" [from "+i.id+"]";function p(){return!1}l.default=d}),98);
__d("MWV2MediaViewerSecureWrapper.react",["LSThreadMediaGalleryGroup","MAWDbMsg","MWChatAttachmentMediaState.react","MWSharedAttachmentsSectionHooks","MWV2MediaViewerContext.react","MWV2MediaViewerNullState.react","cr:5709","cr:5931","cr:5970","emptyFunction","justknobx","react","react-compiler-runtime","useMAWQuerySecureMediaAttachments","useMWMaybeInboxMediaRestoreLoop","useMWMediaLoadingQplLogger","useMWV2MediaViewerSecurePlayableUrl_CausesSuspense","useMWV2MediaViewerSecurePreviewUrl_CausesSuspense"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useCallback;function c(e){return d}function d(){}var m=n("cr:5709")==null?c:n("cr:5709");function p(e){var t=o("react-compiler-runtime").c(34),a=e.children,i=e.initialAttachment,l=e.thread,u;t[0]===Symbol.for("react.memo_cache_sentinel")?(u=r("justknobx")._("3233"),t[0]=u):u=t[0];var c=u,d=r("useMAWQuerySecureMediaAttachments")(l.threadKey,c),p=d[0],f=d[2],g=d[3],h=d[4];r("useMWMaybeInboxMediaRestoreLoop")(l);var y=h!=null?h:!0,C;t[1]!==l.threadType?(C={entrypoint:"media_viewer",galleryGroup:r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS,threadType:l.threadType},t[1]=l.threadType,t[2]=C):C=t[2];var b=r("useMWMediaLoadingQplLogger")(C),v;if(t[3]!==(f==null?void 0:f.lastLoadedMessageId)){var S,R;v=(S=o("MAWDbMsg").toMsgId((R=f==null?void 0:f.lastLoadedMessageId)!=null?R:""))!=null?S:void 0,t[3]=f==null?void 0:f.lastLoadedMessageId,t[4]=v}else v=t[4];var L;t[5]!==y||t[6]!==g||t[7]!==b||t[8]!==v||t[9]!==l.threadKey?(L={earliestLoadedMediaMessageId:v,hasMoreBefore:y,mediaGalleryGroup:r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS,minTimestampMs:g,pageSize:c,qplLogger:b,threadKey:l.threadKey},t[5]=y,t[6]=g,t[7]=b,t[8]=v,t[9]=l.threadKey,t[10]=L):L=t[10];var E=m(L),k;t[11]!==y||t[12]!==E?(k=function(){y&&E()},t[11]=y,t[12]=E,t[13]=k):k=t[13];var I=k,T;t[14]!==f||t[15]!==y||t[16]!==I||t[17]!==p||t[18]!==b.logLoadMediaCancel||t[19]!==b.logLoadMediaSuccess?(T={attachmentsRange:f,hasMore:y,loadMore:I,logLoadMediaCancel:b.logLoadMediaCancel,logLoadMediaSuccess:b.logLoadMediaSuccess,media:p},t[14]=f,t[15]=y,t[16]=I,t[17]=p,t[18]=b.logLoadMediaCancel,t[19]=b.logLoadMediaSuccess,t[20]=T):T=t[20];var D=o("MWSharedAttachmentsSectionHooks").useLoader(T),x=D[1],$=r("useMWV2MediaViewerSecurePreviewUrl_CausesSuspense")(),P=r("useMWV2MediaViewerSecurePlayableUrl_CausesSuspense")(),N=_;if(n("cr:5970")==null||n("cr:5931")==null){var M;return t[21]===Symbol.for("react.memo_cache_sentinel")?(M=s.jsx(r("MWV2MediaViewerNullState.react"),{}),t[21]=M):M=t[21],M}var w;t[22]!==a||t[23]!==P||t[24]!==$||t[25]!==i||t[26]!==p?(w=s.jsx(o("MWChatAttachmentMediaState.react").MWChatAttachmentMediaStateProviderFromAttachments,{attachments:p,getIsSecureThread:N,getPlayableUrl:P,getPreviewUrl:$,initialAttachment:i,children:a}),t[22]=a,t[23]=P,t[24]=$,t[25]=i,t[26]=p,t[27]=w):w=t[27];var A;return t[28]!==P||t[29]!==$||t[30]!==x||t[31]!==p||t[32]!==w?(A=s.jsx(o("MWV2MediaViewerContext.react").MWV2MediaViewerContextProvider,{getDownloadUrl:P,getPlayableUrl:P,getPreviewUrl:$,heroLoggingComponent:r("emptyFunction"),loadMore:x,media:p,children:w}),t[28]=P,t[29]=$,t[30]=x,t[31]=p,t[32]=w,t[33]=A):A=t[33],A}function _(){return!0}l.default=p}),98);
__d("MWV2MediaViewer.react",["FBLogger","FocusRegion.react","FocusWithinHandler.react","I64","LSMessagingThreadTypeUtil","MAWThreadCutover","MWFocusTable.react","MWLSThread","MWPThreadCapabilitiesContext","MWV2MediaViewerContent.react","MWV2MediaViewerCutoverWrapper.react","MWV2MediaViewerNullState.react","MWV2MediaViewerOpenWrapper.react","MWV2MediaViewerSecureWrapper.react","XPlatReactFocusRegion.react","focusScopeQueries","react","react-compiler-runtime","useMWMediaViewerOpenQPLLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useEffect,p=c.useId;function _(e){var t=o("react-compiler-runtime").c(54),n=e.attachment,a=e.onClose,i=o("useMWMediaViewerOpenQPLLogger").useMWMediaViewerOpenQPLLogger(),l=i.endSuccess,c,d;t[0]!==l?(c=function(){l()},d=[l],t[0]=l,t[1]=c,t[2]=d):(c=t[1],d=t[2]),m(c,d);var _=o("MWLSThread").useThread(n.threadKey),f=o("MWPThreadCapabilitiesContext").Provider,g=p(),h;t[3]!==g?(h=function(t){t||o("FocusRegion.react").focusRegionById(g,o("MWFocusTable.react").tabbableScopeQuery)},t[3]=g,t[4]=h):h=t[4];var y=h,C=o("MAWThreadCutover").useGetCutoverOpenThreadKey(n.threadKey),b=o("MAWThreadCutover").useCutoverSecureThreadKeyForOpenThreadKey(C==null?n.threadKey:void 0);if(_==null){r("FBLogger")("messenger_web_media").mustfix("Thread is null in media viewer for attachment with threadKey: %s",(s||(s=o("I64"))).to_string(n.threadKey));var v;return t[5]===Symbol.for("react.memo_cache_sentinel")?(v=u.jsx(r("MWV2MediaViewerNullState.react"),{}),t[5]=v):v=t[5],v}var S=o("LSMessagingThreadTypeUtil").isArmadilloSecure(_.threadType);if(C!=null||b!=null){var R=C!=null?C:_.threadKey,L=b!=null?b:_.threadKey,E;t[6]!==a?(E=function(){a&&a()},t[6]=a,t[7]=E):E=t[7];var k;t[8]!==n||t[9]!==E||t[10]!==_?(k=u.jsx(r("MWV2MediaViewerContent.react"),{initialAttachment:n,onClose:E,thread:_}),t[8]=n,t[9]=E,t[10]=_,t[11]=k):k=t[11];var I;t[12]!==n||t[13]!==R||t[14]!==L||t[15]!==k||t[16]!==_.threadType?(I=u.jsx(r("MWV2MediaViewerCutoverWrapper.react"),{initialAttachment:n,openThreadKey:R,secureThreadKey:L,threadType:_.threadType,children:k}),t[12]=n,t[13]=R,t[14]=L,t[15]=k,t[16]=_.threadType,t[17]=I):I=t[17];var T=I,D;t[18]!==T||t[19]!==_?(D=u.jsx(f,{thread:_,children:T}),t[18]=T,t[19]=_,t[20]=D):D=t[20];var x=D,$;t[21]!==x||t[22]!==g?($=u.jsx(r("XPlatReactFocusRegion.react"),{autoFocusQuery:o("MWFocusTable.react").tabbableScopeQuery,containFocusQuery:o("MWFocusTable.react").tabbableScopeQuery,id:g,recoverFocusQuery:o("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:x}),t[21]=x,t[22]=g,t[23]=$):$=t[23];var P=$,N;return t[24]!==P||t[25]!==y?(N=u.jsx(r("FocusWithinHandler.react"),{onFocusChange:y,onFocusVisibleChange:y,children:P}),t[24]=P,t[25]=y,t[26]=N):N=t[26],N}if(S){var M;t[27]!==a?(M=function(){a&&a()},t[27]=a,t[28]=M):M=t[28];var w;t[29]!==n||t[30]!==M||t[31]!==_?(w=u.jsx(r("MWV2MediaViewerContent.react"),{initialAttachment:n,onClose:M,thread:_}),t[29]=n,t[30]=M,t[31]=_,t[32]=w):w=t[32];var A;t[33]!==n||t[34]!==w||t[35]!==_?(A=u.jsx(r("MWV2MediaViewerSecureWrapper.react"),{initialAttachment:n,thread:_,children:w}),t[33]=n,t[34]=w,t[35]=_,t[36]=A):A=t[36];var F=A,O;t[37]!==F||t[38]!==_?(O=u.jsx(f,{thread:_,children:F}),t[37]=F,t[38]=_,t[39]=O):O=t[39];var B=O,W;t[40]!==B||t[41]!==g?(W=u.jsx(r("XPlatReactFocusRegion.react"),{autoFocusQuery:o("MWFocusTable.react").tabbableScopeQuery,containFocusQuery:o("MWFocusTable.react").tabbableScopeQuery,id:g,recoverFocusQuery:o("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:B}),t[40]=B,t[41]=g,t[42]=W):W=t[42];var q=W,U;return t[43]!==q||t[44]!==y?(U=u.jsx(r("FocusWithinHandler.react"),{onFocusChange:y,onFocusVisibleChange:y,children:q}),t[43]=q,t[44]=y,t[45]=U):U=t[45],U}var V;t[46]!==n||t[47]!==a||t[48]!==_?(V=u.jsx(r("MWV2MediaViewerContent.react"),{initialAttachment:n,onClose:a,thread:_}),t[46]=n,t[47]=a,t[48]=_,t[49]=V):V=t[49];var H;return t[50]!==n||t[51]!==V||t[52]!==_?(H=u.jsx(r("MWV2MediaViewerOpenWrapper.react"),{initialAttachment:n,thread:_,children:V}),t[50]=n,t[51]=V,t[52]=_,t[53]=H):H=t[53],H}l.default=_}),98);